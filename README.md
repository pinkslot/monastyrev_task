# Сайт для ведения справочника товаров.

http://kimvgm80.beget.tech/products/index (В базе 993 366 товаров)
### Список товаров
На главной странице отображается список товаров из справочника.
Изначально на страницу загрузится 10 товаров. 
Каждый клик на кнопку "Load More" будет добавлять еще по 10 штук.
Товары отсортированы по убыванию `id`, поэтому последние 
добавленные товары будут вверху списка.

В строках таблицы, помимо всех свойств товара отображаются 2 кнопки: 
 - карандаш &mdash; для редактирования товара
 - мусорка &mdash; для удаления

Просматривать товар на отдельной странице нельзя &mdash; 
вся информация о товаре и так показана в таблице.
Кнопка редактирования товара и кнопка "Create new" над таблицей переводят 
на новую страницу с формой для редактирования/создания товара. 
Кнопка удаления товара удаляет строчку без перезагрузки страницы ajax запросом.
План, конечно же, заключался в том, 
чтобы редактирование и добавление тоже работали ajax'ом, 
но меня хватило только на удаление.

### Карточка товара
Поля производителя и страны на форме являются строками 
(возможно нужно было завести отдельные справочники?).
В случае попытки сохранить некорректные данные,
пользователь останется на странице с формой, 
а в полях формы появятся сообщения об ошибках.

### Поиск
Я добавил 2 полнотекстовых поиска (для каждого есть отдельный виджет на странице со списком):
 - с помощью оператора `LIKE`
 - с помощью оператора `MATCH ... AGAINST ... IN BOOLEAN MODE`
 
 *Сравнение.* Применение оператора `LIKE` [не рекомендуется](https://stackoverflow.com/questions/792875/which-sql-query-is-better-match-against-or-like)
  на больших объёмах данных, 
 из-за его низкой производительности 
 . 
 На тестовой базе с ~ 10^6 записей 
 время выполнения запроса "конт яч пр кап" 
 находит товар "Прадакса капсула 110 мг упаковка контурная ячейковая №60" 
 за **169мс** с помощью `MATCH` и за **1437мс** с помощью `LIKE`.
 С другой стороны, запросы, для которых имеется довольно много совпадений, 
 быстрее обрабатываются первым способом.
 
 Основным недостатком способа `MATCH` является невыполнение поставленной задачи.
 В использованной конфигурации этот оператор позволяет искать слова только с начала.
 Т.е. запрос "радакса" уже не находит искомый товар. 
 Кроме того, этот способ 
 *не дружит* с не цифро-буквенными символами, 
 и результат поиска "№60" тоже будет пустым.
 Еще `MATCH` не работает с короткими словами, 
 в том смысле что поиск "мг" не найдёт строку "30 мг", но найдёт "30 мгАБВГД".
 Первый способ этими недостаткоми не обладает. 
 
